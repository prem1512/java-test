pipeline {
    agent any
    parameters {
        choice(name: 'Branch', choices: ['main', 'staging'])    
    }
stages{
    stage("checkout")
    {
    steps {
    script{
        checkout([
        $class: 'GitSCM',
        branches: [[name: params.Branch ]], 
        userRemoteConfigs: [[
            url: "https://github.com/prem1512/java-test.git",
            credentialsId: "cred-git"
        ]]
    ])
    }
    }
}


    stage('Build') {
            steps {
                script {
                    echo "Building for ${params.Branch} deployment"
                    sh "mvn clean install -Denv=${params.Branch} "
                }
            }
        }
}
}